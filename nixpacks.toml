[phases.setup]
nixPkgs = ["maven", "jdk17"]

[phases.build]
cmds = [
  "mvn -v",
  "mvn clean package -DskipTests"
]

[start]
cmd = "java $JAVA_OPTS -jar target/martinis.jar"

[variables]
MAVEN_OPTS = "-Xmx1024m -Xms512m"
JAVA_OPTS = "-Xmx512m -Xms256m -XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0"
